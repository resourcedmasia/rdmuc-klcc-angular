<div *ngIf="!isHideDetail" class="card mb-4 p-3">
  <h4 class="card-header">
    <i class="ion ion-md-add-circle-outline"></i>&nbsp;&nbsp; Login Log
  </h4>
  <div class="filter">
    <ngx-spinner style="z-index: 2;" [fullScreen]="false" type="line-scale" size="small" bdColor="rgba(39,39,45,1)"></ngx-spinner>
    <div style="width: 180px;">
      <ng-select appendTo="body" placeholder="Username" [clearable]="false" [items]="usernameDropdown" [(ngModel)]="selectedUsername" (change)="onSelectUsername($event)"></ng-select>
    </div>
    <div style="margin-left: 10px;width: 180px">
      <ng-select appendTo="body" placeholder="Ip Address" [clearable]="false" [items]="ipDropdown" [(ngModel)]="selectedIpAddress" (change)="onSelectIpAddress($event)"></ng-select>
    </div>
    <div style="margin-left: 10px;width: 180px">
      <ng-select appendTo="body" placeholder="Status" [clearable]="false" [items]="statusDropdown" [(ngModel)]="selectedStatus" (change)="onSelectStatus($event)"></ng-select>
    </div>
      <input style="width: 180px" class="input-date" #selectedDate (change)="selectDateFn($event)" [(ngModel)]="dateValue" type="date" placeholder="Date">
    <button (click)="clearFilter()" class="btn btn-primary btn-filter">Clear</button>
    <button name="Print" type="button" class="btn btn-default print" (click)="print()"><i class="ion ion-md-print"></i></button>
  </div>
  <div class="scroll-table">
    <ng-container *ngIf="this.filterLogDetail.length > 0 && isLoading">
      <table class="table table-bordered table-hover">
        <thead>
          <tr class="table-header">
            <th>Id</th>
            <th>Username</th>
            <th>Ip Address</th>
            <th>Status</th>
            <th style="min-width: 120px;">Date & Time</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of filterLogDetail | paginate: config">
            <td>{{item.id}}</td>
            <td>{{item.username}}</td>
            <td>{{item.ip_address}}</td>
            <td>{{item.status}}</td>
            <td>{{item.timestamp}}</td>
            <td>
              <button type="button" class="btn btn-primary" (click)="detailLog(item.id)">Detail</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="pagination">
        <pagination-controls (pageChange)="pageChange($event)"></pagination-controls>
      </div>
    </ng-container>
    <ng-container *ngIf="this.filterLogDetail.length == 0">
      <div class="no-data">
        <h6>{{displayMessage}}</h6>
      </div>
    </ng-container>
  </div>
</div>
<div *ngIf="isHideDetail" class="card mb-4 p-3">
  <h4 class="card-header">
    <i class="ion ion-md-add-circle-outline"></i>&nbsp;&nbsp; Login Log Details
  </h4>
  <div>
    <button class="btn btn-primary header-btn" (click)="redirectBackUrl()">Back</button>
    <ul class="list-group">
      <li class="list-group-item">
        <span class="header-text">Id:</span>{{selectedLog.id}}
      </li>
      <li class="list-group-item">
        <span class="header-text">Username:</span>{{selectedLog.username}}
      </li>
      <li class="list-group-item">
        <span class="header-text">Ip Address:</span>{{selectedLog.ip_address}}
      </li>
      <li class="list-group-item">
        <span class="header-text">User Agent:</span>{{selectedLog.user_agent}}
      </li>
      <li class="list-group-item">
        <span class="header-text">Status:</span>{{selectedLog.status}}
      </li>
      <li class="list-group-item">
        <span class="header-text">Timestamp:</span>{{selectedLog.timestamp}}
      </li>
    </ul>
  </div>
</div>

<!---------------------------------------------- Login Log Printable Table -------------------------------------->

<div style="display: none;">
  <div id="login-table" class="scroll">
    <table class="table table-bordered table-hover">
      <thead>
        <tr class="table-header">
          <th>Id</th>
          <th>Username</th>
          <th>Ip Address</th>
          <th>User Agent</th>
          <th>Status</th>
          <th style="min-width: 120px;">Date & Time</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of filterLogDetail"> 
          <td>{{item.id}}</td>
          <td>{{item.username}}</td>
          <td>{{item.ip_address}}</td>
          <td>{{item.user_agent}}</td>
          <td>{{item.status}}</td>
          <td>{{item.timestamp}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>